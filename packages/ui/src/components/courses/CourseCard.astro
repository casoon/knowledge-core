---
import { LEVEL_COLORS, LEVEL_LABELS, type Level } from "../../constants";

export interface Props {
  /** Course title */
  title: string;
  /** Short course description */
  description: string;
  /** Difficulty level (beginner, intermediate, advanced) */
  level: Level;
  /** Estimated course duration in minutes */
  estimatedMinutes: number;
  /** Tags for categorization */
  tags: string[];
  /** Link to course page */
  href: string;
  /** Optional completion percentage (0-100) */
  progress?: number;
}

const { title, description, level, estimatedMinutes, tags, href, progress } =
  Astro.props;
---

<a
  href={href}
  class="card cursor-pointer hover:shadow-lg transition-all group min-w-0"
>
  <div class="flex items-start justify-between gap-2 mb-3">
    <h3
      class="text-lg sm:text-xl font-bold text-text group-hover:text-primary transition-colors break-words min-w-0"
    >
      {title}
    </h3>
    <span class:list={["badge flex-shrink-0", LEVEL_COLORS[level]]}
      >{LEVEL_LABELS[level]}</span
    >
  </div>

  <p class="text-text-muted mb-4 line-clamp-2 text-sm sm:text-base">
    {description}
  </p>

  <div class="flex flex-wrap gap-1.5 sm:gap-2 mb-4">
    {tags.map((tag) => <span class="badge badge-primary text-xs">{tag}</span>)}
  </div>

  <div class="flex items-center justify-between text-sm text-text-muted">
    <div class="flex items-center gap-2">
      <svg
        class="w-4 h-4"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <span>{Math.round(estimatedMinutes / 60)} hours</span>
    </div>

    {
      progress !== undefined && (
        <div class="flex items-center gap-2">
          <div class="w-16 h-2 bg-surface-alt rounded-full overflow-hidden">
            <div
              class="h-full bg-primary transition-all"
              style={`width: ${progress}%`}
            />
          </div>
          <span>{progress}%</span>
        </div>
      )
    }
  </div>
</a>
