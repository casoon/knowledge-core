---
export interface Props {
  /** GitHub Repository (z.B. "casoon/learning-examples") */
  repo?: string;
  /** Pfad im Repository (z.B. "rust/01-hello-world") */
  path: string;
  /** Titel des Beispiels */
  title?: string;
  /** Programmiersprache f√ºr das Icon */
  language?: 'rust' | 'go' | 'python' | 'typescript' | 'javascript' | 'csharp' | 'docker' | 'bash';
  /** Branch (default: main) */
  branch?: string;
}

const {
  repo = 'casoon/learning-examples',
  path,
  title,
  language,
  branch = 'main'
} = Astro.props;

const repoUrl = `https://github.com/${repo}/tree/${branch}/${path}`;
const rawUrl = `https://github.com/${repo}/blob/${branch}/${path}`;

// Language icons (simple SVG paths)
const languageIcons: Record<string, string> = {
  rust: 'M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z',
  go: 'M1.811 10.231c-.047 0-.058-.023-.035-.059l.246-.315c.023-.035.081-.058.128-.058h4.172c.046 0 .058.035.035.07l-.199.303c-.023.036-.082.07-.117.07zM.047 11.306c-.047 0-.059-.023-.035-.058l.245-.316c.023-.035.082-.058.129-.058h5.328c.047 0 .07.035.058.07l-.093.28c-.012.047-.058.07-.105.07zm2.828 1.075c-.047 0-.059-.035-.035-.07l.163-.292c.023-.035.07-.07.117-.07h2.337c.047 0 .07.035.07.082l-.023.28c0 .047-.047.082-.082.082zM12.129 10.022l-1.88.467c-.164.047-.175.058-.316-.105-.164-.187-.292-.304-.527-.409-.702-.304-1.38-.21-2.012.164-.749.456-1.135 1.122-1.123 1.974.012.84.596 1.532 1.427 1.65.714.105 1.322-.128 1.822-.643.105-.117.199-.245.316-.386H7.974c-.234 0-.292-.152-.21-.35.14-.351.398-.936.55-1.228.035-.07.117-.187.269-.187h4.266c-.023.292-.023.573-.07.853-.117.747-.398 1.438-.865 2.046-.76.99-1.763 1.637-3.038 1.834-1.042.152-2.024-.035-2.876-.643-.793-.573-1.274-1.344-1.439-2.29-.187-1.077.07-2.07.677-2.958.643-.94 1.509-1.567 2.596-1.88 1.31-.374 2.561-.21 3.687.572.491.339.874.784 1.158 1.31.047.07.012.128-.07.152',
  python: 'M14.31.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.83l-.15.01-.14.03-.11.04-.09.05-.07.06-.05.07-.04.08-.03.09-.02.1-.01.11v2.93l-.1.09-.11.08-.12.07-.14.07-.16.06-.17.05-.19.04-.21.03-.22.02-.24.01-.26.01-.32-.02-.37-.04-.42-.07-.46-.11-.5-.15-.55-.21-.59-.27-.63-.35-.66-.44-.68-.54-.69-.64-.69-.75-.68-.87-.66-1-.64-1.13-.61-1.27-.58-1.41-.54-1.56L0 2.31l.09.02.12.03.16.04.21.04.27.05.34.05.42.06.5.07.6.07.7.08.82.09.94.1 1.08.11L7 3l1.37.16 1.56.19 1.75.22 1.96.26 2.17.29 2.4.33v-.35l-.01-.69-.04-.51-.06-.42-.08-.35-.1-.29-.12-.23-.14-.19-.16-.16-.18-.12-.2-.1-.21-.08-.23-.06-.24-.04-.25-.03-.26-.02zm-3.64 2.08c-.49 0-.89.4-.89.89s.4.89.89.89.89-.4.89-.89-.4-.89-.89-.89zM8.66 24l-.9-.2-.73-.26-.59-.3-.45-.32-.34-.34-.25-.34-.16-.33-.1-.3-.04-.26-.02-.2.01-.13v-5.34l.05-.63.13-.55.21-.46.26-.38.3-.31.33-.25.35-.19.35-.14.33-.1.3-.07.26-.04.21-.02h4.53l.15-.01.14-.03.11-.04.09-.05.07-.06.05-.07.04-.08.03-.09.02-.1.01-.11v-2.93l.1-.09.11-.08.12-.07.14-.07.16-.06.17-.05.19-.04.21-.03.22-.02.24-.01.26-.01.32.02.37.04.42.07.46.11.5.15.55.21.59.27.63.35.66.44.68.54.69.64.69.75.68.87.66 1 .64 1.13.61 1.27.58 1.41.54 1.56.49 1.71-.09-.02-.12-.03-.16-.04-.21-.04-.27-.05-.34-.05-.42-.06-.5-.07-.6-.07-.7-.08-.82-.09-.94-.1-1.08-.11L17 21l-1.37-.16-1.56-.19-1.75-.22-1.96-.26-2.17-.29-2.4-.33v.35l.01.69.04.51.06.42.08.35.1.29.12.23.14.19.16.16.18.12.2.1.21.08.23.06.24.04.25.03.26.02zm3.64-2.08c.49 0 .89-.4.89-.89s-.4-.89-.89-.89-.89.4-.89.89.4.89.89.89z',
  typescript: 'M1.125 0C.502 0 0 .502 0 1.125v21.75C0 23.498.502 24 1.125 24h21.75c.623 0 1.125-.502 1.125-1.125V1.125C24 .502 23.498 0 22.875 0zm17.363 9.75c.612 0 1.154.037 1.627.111a6.38 6.38 0 0 1 1.306.34v2.458a3.95 3.95 0 0 0-.643-.361 5.093 5.093 0 0 0-.717-.26 5.453 5.453 0 0 0-1.426-.2c-.3 0-.573.028-.819.086a2.1 2.1 0 0 0-.623.242c-.17.104-.3.229-.393.374a.888.888 0 0 0-.14.49c0 .196.053.373.156.529.104.156.252.304.443.444s.423.276.696.41c.273.135.582.274.926.416.47.197.892.407 1.266.628.374.222.695.473.963.753.268.279.472.598.614.957.142.359.214.776.214 1.253 0 .657-.125 1.21-.373 1.656a3.033 3.033 0 0 1-1.012 1.085 4.38 4.38 0 0 1-1.487.596c-.566.12-1.163.18-1.79.18a9.916 9.916 0 0 1-1.84-.164 5.544 5.544 0 0 1-1.512-.493v-2.63a5.033 5.033 0 0 0 3.237 1.2c.333 0 .624-.03.872-.09.249-.06.456-.144.623-.25.166-.108.29-.234.373-.38a1.023 1.023 0 0 0-.074-1.089 2.12 2.12 0 0 0-.537-.5 5.597 5.597 0 0 0-.807-.444 27.72 27.72 0 0 0-1.007-.436c-.918-.383-1.602-.852-2.053-1.405-.45-.553-.676-1.222-.676-2.005 0-.614.123-1.141.369-1.582.246-.441.58-.804 1.004-1.089a4.494 4.494 0 0 1 1.47-.629 7.536 7.536 0 0 1 1.77-.201zm-15.113.188h9.563v2.166H9.506v9.646H6.789v-9.646H3.375z',
  javascript: 'M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z',
  csharp: 'M11.5 15.97l.41 2.44c-.26.14-.68.27-1.24.39-.57.13-1.24.2-2.01.2-2.21-.04-3.87-.7-4.98-1.96C2.56 15.77 2 14.16 2 12.21c.05-2.31.72-4.08 2-5.32C5.32 5.64 6.96 5 8.94 5c.75 0 1.4.07 1.94.19s.94.25 1.2.4l-.58 2.49-1.06-.34c-.4-.1-.86-.15-1.39-.15-1.16-.01-2.12.36-2.87 1.1-.76.73-1.15 1.85-1.18 3.34 0 1.36.37 2.42 1.08 3.2.71.77 1.71 1.17 2.99 1.18l1.33-.12c.43-.08.79-.19 1.1-.32zm11.26-5.71l2.04-.5.41 2.44c-.26.14-.68.27-1.24.39-.57.13-1.24.2-2.01.2-2.21-.04-3.87-.7-4.98-1.96-.12-.14-.23-.29-.34-.44H15v2.02h-2.5V8.39h.77l-.04-.59c-.08-.06-.16-.13-.24-.19-.76-.73-1.72-1.11-2.88-1.11-.59.01-1.15.1-1.64.27l.32-2.51c.37-.08.8-.14 1.29-.17h.17l.01.02.13-.02c.98 0 1.87.18 2.68.54.09.04.18.08.26.13h.01c.41.21.78.46 1.12.75l.08.08.07-.04c.54-.27 1.1-.48 1.7-.62.68-.16 1.44-.24 2.27-.24.75 0 1.4.07 1.94.19s.94.25 1.2.4l-.58 2.49-1.06-.34c-.4-.1-.86-.15-1.39-.15-1.16-.01-2.12.36-2.87 1.1-.07.07-.14.15-.2.22h2.14V8.39h2.5v1.87h.77l.36.04.13-.04z',
  docker: 'M13.983 11.078h2.119a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.954-5.43h2.118a.186.186 0 00.186-.186V3.574a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.186m0 2.716h2.118a.187.187 0 00.186-.186V6.29a.186.186 0 00-.186-.185h-2.118a.185.185 0 00-.185.185v1.887c0 .102.082.185.185.186m-2.93 0h2.12a.186.186 0 00.184-.186V6.29a.185.185 0 00-.185-.185H8.1a.185.185 0 00-.185.185v1.887c0 .102.083.185.185.186m-2.964 0h2.119a.186.186 0 00.185-.186V6.29a.185.185 0 00-.185-.185H5.136a.186.186 0 00-.186.185v1.887c0 .102.084.185.186.186m5.893 2.715h2.118a.186.186 0 00.186-.185V9.006a.186.186 0 00-.186-.186h-2.118a.185.185 0 00-.185.185v1.888c0 .102.082.185.185.185m-2.93 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.185.185 0 00-.184.185v1.888c0 .102.083.185.185.185m-2.964 0h2.119a.185.185 0 00.185-.185V9.006a.185.185 0 00-.185-.186h-2.119a.185.185 0 00-.185.185v1.888c0 .102.083.185.185.185m-2.92 0h2.12a.185.185 0 00.184-.185V9.006a.185.185 0 00-.184-.186h-2.12a.186.186 0 00-.185.185v1.888c0 .102.084.185.185.185M23.763 9.89c-.065-.051-.672-.51-1.954-.51-.338.001-.676.03-1.01.087-.248-1.7-1.653-2.53-1.716-2.566l-.344-.199-.226.327c-.284.438-.49.922-.612 1.43-.23.97-.09 1.882.403 2.661-.595.332-1.55.413-1.744.42H.751a.751.751 0 00-.75.748 11.376 11.376 0 00.692 4.062c.545 1.428 1.355 2.48 2.41 3.124 1.18.723 3.1 1.137 5.275 1.137.983.003 1.963-.086 2.93-.266a12.248 12.248 0 003.823-1.389c.98-.567 1.86-1.288 2.61-2.136 1.252-1.418 1.998-2.997 2.553-4.4h.221c1.372 0 2.215-.549 2.68-1.009.309-.293.55-.65.707-1.046l.098-.288z',
  bash: 'M21.038 4.9l-7.577-4.498C13.009.134 12.505 0 12 0c-.505 0-1.009.134-1.462.402L2.961 4.9C2.057 5.437 1.5 6.429 1.5 7.498v8.987c0 1.069.557 2.061 1.461 2.599l7.577 4.498c.453.268.957.402 1.462.402.505 0 1.009-.134 1.461-.402l7.577-4.498c.904-.538 1.462-1.53 1.462-2.599V7.498c0-1.069-.558-2.061-1.462-2.599zM8.678 15.523l-1.251.725-.001-1.449.001-7.196 1.251.724v7.196zm9.063 1.58c0 .283-.209.398-.465.254l-5.466-3.076v1.601c0 .27-.197.594-.438.719l-.932.48c-.24.124-.438.014-.438-.245v-1.8L4.64 11.57c-.256-.144-.464-.493-.464-.776V9.109c0-.283.209-.398.464-.254l10.356 5.979v-1.6c0-.27.198-.595.438-.72l.932-.48c.241-.124.438-.014.438.245v1.8l.937.541v1.485z'
};

const icon = language ? languageIcons[language] : null;
const displayTitle = title || path.split('/').pop() || path;
---

<a
  href={repoUrl}
  target="_blank"
  rel="noopener noreferrer"
  class="code-example group flex items-center gap-3 p-4 rounded-lg border border-border bg-surface-alt hover:border-primary/50 hover:bg-primary/5 transition-all"
>
  <!-- Icon -->
  <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-surface flex items-center justify-center text-text-muted group-hover:text-primary transition-colors">
    {icon ? (
      <svg class="w-5 h-5" viewBox="0 0 24 24" fill="currentColor">
        <path d={icon} />
      </svg>
    ) : (
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
      </svg>
    )}
  </div>

  <!-- Content -->
  <div class="flex-1 min-w-0">
    <div class="font-medium text-text group-hover:text-primary transition-colors">
      {displayTitle}
    </div>
    <div class="text-sm text-text-muted truncate">
      {repo}/{path}
    </div>
  </div>

  <!-- Arrow -->
  <div class="flex-shrink-0 text-text-muted group-hover:text-primary transition-colors">
    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
    </svg>
  </div>
</a>

<style>
  .code-example:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
</style>
